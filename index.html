<!-- Home Page -->
<div class="container" id="homePage">
  <div class="homeHeader">
    <h2>Welcome, <span id="homeName"></span>!</h2>
    <button onclick="logout()">Log Out</button>
  </div>

  <div class="homeLayout">
    <!-- Friends Sidebar -->
    <div class="sidebar">
      <h3>Friends</h3>
      <ul id="friendsList"></ul>
    </div>

    <!-- News Feed -->
    <div class="feed">
      <!-- Post box -->
      <div class="createPostBox">
        <textarea id="postText" placeholder="What's on your mind?"></textarea>
        <input type="file" id="postFile" accept="image/*,video/*">
        <button onclick="createPost()">Post</button>
      </div>

      <!-- Posts appear here -->
      <div id="postsArea"></div>
    </div>

    <!-- Videos Sidebar -->
    <div class="sidebar">
      <h3>Videos</h3>
      <div id="videoList"></div>
    </div>
  </div>
</div>

<style>
  .homeLayout { display:flex; gap:20px; }
  .sidebar { flex:1; background:#f7f7f7; padding:10px; border-radius:10px; height:fit-content; }
  .feed { flex:2; }
  .createPostBox { border:1px solid #ddd; padding:10px; border-radius:10px; background:#fff; margin-bottom:20px; }
  .createPostBox textarea { width:100%; border:1px solid #ccc; border-radius:6px; padding:8px; }
  .createPostBox input { margin:8px 0; }
  #postsArea .post { background:#fff; border:1px solid #ddd; padding:12px; margin-bottom:15px; border-radius:10px; }
</style>

<script>
function loadPosts(){
  let posts = JSON.parse(localStorage.getItem("posts")) || [];
  let postsArea = document.getElementById("postsArea");
  let videoList = document.getElementById("videoList");
  let friendsList = document.getElementById("friendsList");

  postsArea.innerHTML="";
  videoList.innerHTML="";
  friendsList.innerHTML="";

  // Render friends list
  (currentUser.friends || []).forEach(f=>{
    let li=document.createElement("li");
    li.innerHTML=`<a href='#' onclick='openProfile("${f}")'>${f}</a>`;
    friendsList.appendChild(li);
  });

  // Render posts
  posts.reverse().forEach(p=>{
    let div = document.createElement("div");
    div.className="post";
    div.innerHTML=`<strong><a href='#' onclick='openProfile("${p.author}")'>${p.author}</a>:</strong> ${p.text || ""}`;
    if(p.type==="image"){ div.innerHTML+=`<br><img src='${p.src}' style="max-width:100%; border-radius:10px; margin-top:10px;">`; }
    if(p.type==="video"){ 
      div.innerHTML+=`<br><video controls src='${p.src}' style="max-width:100%; border-radius:10px; margin-top:10px;"></video>`; 
      // Also add to right sidebar "Videos"
      let vid=document.createElement("div");
      vid.innerHTML=`<video controls src='${p.src}' style="width:100%; border-radius:10px; margin-bottom:10px;"></video>`;
      videoList.appendChild(vid);
    }
    postsArea.appendChild(div);
  });
}
</script>


